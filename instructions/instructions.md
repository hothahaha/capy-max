# 概述

该功能允许⽤户在平台上存⼊ wBTC,wETH,USDC（Arbitrum 链），平台将⽤户存⼊的资产
⽤于去中⼼化借贷和质押以⽣成收益。⽤户可以随时赎回其存款及收益。

## 功能需求(\*以下以存⼊资产 wBTC 为例)

### 存款功能

1. ⽤户存款：
    - ⽤户可以将 wBTC 存⼊平台。
    - 存⼊的 wBTC 将被转移⾄平台的智能合约中。
2. AAVE 抵押：
    - 平台智能合约与 AAVE 协议交互：
        - 将 wBTC 作为抵押品存⼊ AAVE。
        - 根据 63% 的抵押率借出 USDC。
3. Hypliquidity 质押：
    - 借出的 USDC ⾃动存⼊ Hypliquidity 的质押功能以⽣成收益。
    - 由于 Hypliquidity 具有质押四天后才可赎回的限制，平台需要限制⽤户的质押
      时间⾄少为五天。
4. 动态风险调整：
    - 平台将根据 AAVE 上抵押资产的清算风险动态调整：
        - 若清算风险过⾼，接近平台设定的阈值，平台将从 Hypliquidity 中赎回
          部分 USDC，归还 AAVE 以降低清算风险。
        - 若清算风险⾮常低，平台将贷出更多 USDC 并存⼊ Hypliquidity，以增
          加质押收益。
    - ⼈⼯操作功能：
        - 当清算风险过⾼或过低时，管理员可以⼿动触发从 Hypliquidity 赎回部
          分 USDC，并归还⾄ AAVE，反之同理。

### 赎回功能

1. ⽤户赎回请求：
    - ⽤户可以随时发起赎回请求，但仅限于质押时间已满五天后。
2. USDC 解质押及贷款归还：
    - 平台智能合约执⾏以下操作：
        - 从 Hypliquidity 提取 USDC。
        - 使⽤提取的 USDC 偿还在 AAVE 的贷款。
3. wBTC 提取及收益分发：
    - 偿还贷款后，从 AAVE 中提取抵押的 wBTC。
    - 将提取的 wBTC 和 Hypliquidity ⽣成的 USDC 收益⼀并返还给⽤户。
      技术需求
      智能合约
4. wBTC 存款：
    - 接收并记录⽤户的存款。
    - 将存⼊的 wBTC 转移⾄ AAVE 进⾏抵押。
5. 抵押管理：
    - 与 AAVE 协作：
        - 将 wBTC 存为抵押品。
        - 按照 63% 抵押率借出 USDC。
6. USDC 质押：
    - 与 Hypliquidity 协作：
        - 将借出的 USDC 存⼊ Hypliquidity 的质押功能。
        - 跟踪质押收益。
    - 实现⽤户质押最短时间限制（五天）。
7. 动态风险调整：
    - 实现以下动态风险调整功能：
        - 定期监控 AAVE 上 wBTC 的抵押率。
        - 若抵押率过⾼（接近清算风险阈值）：
        - 从 Hypliquidity 赎回部分 USDC。
        - 归还部分 USDC ⾄ AAVE，降低抵押风险。
        - 若抵押率过低（清算风险极⼩）：
        - 从 AAVE 贷出更多 USDC。
        - 将新增 USDC 存⼊ Hypliquidity 以提⾼质押收益。
    - ⼈⼯⼲预功能：（低频功能）
        - 提供管理员⼿动触发调整的接⼜：
        - 当清算风险过⾼或平台策略发⽣变化时，管理员可以⼿动赎回部分 USDC 并归还⾄ AAVE，或者调整存款策略以优化收益。
8. 赎回流程：
    - 从 Hypliquidity 提取 USDC。
    - 归还 AAVE 的 USDC 贷款。
    - 从 AAVE 提取 wBTC。
    - 计算并分发 wBTC 和 USDC 收益给⽤户。
9. 收益跟踪：
    - 记录并更新每位⽤户的 USDC 收益。
    - 全局收益池的动态调整确保所有⽤户的收益分配公平。

## 技术需求

### 智能合约

1. wBTC 存款：
    - 接收并记录⽤户的存款。
    - 将存⼊的 wBTC 转移⾄ AAVE 进⾏抵押。
2. 抵押管理：
    - 与 AAVE 协作：
        - 将 wBTC 存为抵押品。
        - 按照 63% 抵押率借出 USDC。
3. USDC 质押：
    - 与 Hypliquidity 协作：
        - 将借出的 USDC 存⼊ Hypliquidity 的质押功能。
        - 跟踪质押收益。
    - 实现⽤户质押最短时间限制（五天）。
4. 动态风险调整：
    - 实现以下动态风险调整功能：
        - 定期监控 AAVE 上 wBTC 的抵押率。
        - 若抵押率过⾼（接近清算风险阈值）：
        - 从 Hypliquidity 赎回部分 USDC。
        - 归还部分 USDC ⾄ AAVE，降低抵押风险。
        - 若抵押率过低（清算风险极⼩）：
        - 从 AAVE 贷出更多 USDC。
        - 将新增 USDC 存⼊ Hypliquidity 以提⾼质押收益。
    - ⼈⼯⼲预功能：（低频功能）
        - 提供管理员⼿动触发调整的接⼜：
        - 当清算风险过⾼或平台策略发⽣变化时，管理员可以⼿动赎回部分 USDC 并归还⾄ AAVE，或者调整存款策略以优化收益。
5. 赎回流程：
    - 从 Hypliquidity 提取 USDC。
    - 归还 AAVE 的 USDC 贷款。
    - 从 AAVE 提取 wBTC。
    - 计算并分发 wBTC 和 USDC 收益给⽤户。
6. 收益跟踪：
    - 记录并更新每位⽤户的 USDC 收益。
    - 全局收益池的动态调整确保所有⽤户的收益分配公平。
